type: "MARKDOWN_NOTE"
folder: "c7ab6e01dd6c502bb60d"
title: "volatile 提醒编译器被volatile修饰的变量随时可能会改变，所以每次都会去内存取最新的数据，而不是读取寄存器中上一次的数据。"
content: '''
  `volatile` 提醒编译器被`volatile`修饰的变量随时可能会改变，所以每次都会去内存取最新的数据，而不是读取寄存器中上一次的数据。
  
  因为访问寄存器是比访问RAM更快的，所以编译器在编译.c文件的时候，会尽量访问寄存器中的数据，而读取寄存器中的数据有可能引起脏读。
  每次使用变量都去内存中取值，然后通过系统总线传到CPU处理，有很大的开销，所以在CPU的Cache中对变量做了一个副本。
  
  
  一般来说，volatile用在如下的几个地方
  1. 中断服务程序中修改供其他程序检测的变量
  2. 多任务情况下各任务间共享的标志
  3. 存储器映射的硬件寄存器通常也要用volatile，因为每次对其的读写都可能是不同的数据
'''
tags: []
isStarred: false
isTrashed: false
createdAt: "2017-09-18T08:42:20.631Z"
updatedAt: "2017-09-18T08:55:31.355Z"
